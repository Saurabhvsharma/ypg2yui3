<!DOCTYPE html>
<html>
    <head>
        <title>Scripting News RSS</title>
    </head>
    <body>
        <header>Scripting News RSS</header>
        <section>RSS will go here when we have them.</section>
        <footer>See [Scripting News](http://scripting.com) for the source of the feed. Dave Winer has a great explanation
        of RSS as [JSON](http://rssjs.org/) at rssjs.org.</footer>
        <!-- get YUI3 on the page, and a script block for your code -->
        <script src="http://yui.yahooapis.com/3.10.0/build/yui/yui-min.js"></script>
        <script>
        // We need to include the IO module in our use method call.
        YUI().use("node", "io", function (Y) {
            // Your code goes here
            var url = "http://scripting.com/rss.json",
                section = Y.one("section");
            // The first parameter is the URL we're contacting then
            // we give it an object literal for our listener methods
            // and any other methods...
            Y.io(url, {
                on: {
                    success: function (id, response, args) {
                        var rss = JSON.parse(response.responseText),
                            output = [];

                        if (rss) {
                            if (rss.channel.item.length > 0) {
                                rss.channel.item.forEach(function (item) {
                                    output.push('<h3>' + item.title + '</h3>' +
                                        '<a href="' + item.link + '">' + item.pubDate + '</a>');
                                });
                                section.setHTML(output.join("<p>"));
                            } else {
                                section.set("text", "No articles found.");
                            }
                        } else {
                            section.set("text", "Could not parse RSS response");
                        }
                    },
                    failure: function () {
                        section.set("text", "Cound not get RSS from " + url)
                    }
                }
            });
        });
        </script>
    </body>
</html>