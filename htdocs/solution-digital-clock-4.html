<!DOCTYPE html>
<html>
    <head>
        <title>Digital Clock 4</title>
        <style></style>
    </head>
    <body>
        <header>Digital Clock 4</header>
        <section id="clock">Main content goes here</section>
        <footer>The section above should display the date and time. It should change every second.</footer>
        <!-- Here are our handlebars templates -->
        <script id="digital-view" type="text/x-handlebars-template">
            {{time}}
        </script>
        <!-- get YUI3 on the page, and a script block for your code -->
        <script src="http://yui.yahooapis.com/3.10.0/build/yui/yui-min.js"></script>
        <script>
        // WE configure our _YUI()_ this time.
        YUI({
            modules: {
                "digital-clock": {
                    fullpath: "digital-clock-4.js"
                }
            }
        }).use("node", "digital-clock", function (Y) {
            // Your code goes here
            var clock = new Y.DigitalClock();

            function updateAlarms (id, response, arguments) {
                var clock = arguments.clock,
                    selector = arguments.selector,
                    update_in_milliseconds = arguments.update_in_milliseconds,
                    template_selector = arguments.template_selector,
                    alarms = JSON.parse(response.responseText);
               // Run our clock with alarms
               clock.run(selector, interval, template_selector, alarms);
            }

            function noAlarms (id, response, arguments) {
                var clock = arguments.clock,
                    selector = arguments.selector,
                    update_in_milliseconds = arguments.update_in_milliseconds,
                    template_selector = arguments.template_selector, 
                    section = Y.one(arguments.selector);

                // Run our clock without alarms
                section.set("text", "No alarms available. Try again later.");
                clock.run(selector, interval, template_selector);
            }
            
            // Now configure and get our alarms data.
            Y.io("alarms.json", {
                on: {
                    success: updateAlarms,
                    failure: noAlarms
                },
                arguments: {
                    clock: clock,
                    selector: "#digital-view",
                    interval: 1000,
                    template_selector: "#digital-view-template"
                }
            });
        });
        </script>
    </body>
</html>